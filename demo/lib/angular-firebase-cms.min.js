/*! angular-firebase-cms 08-08-2015 */
function FirebaseCms(a){this.firebaseUrl=a}var firebaseCmsModule=angular.module("firebaseCms",[]);firebaseCmsModule.provider("firebaseCms",[function(){var a=null;this.setContentUrl=function(b){a=b},this.$get=[function(){return new FirebaseCms(a)}]}]),firebaseCmsModule.run(["firebaseCmsService","$log",function(a,b){a.init().then(function(a){b.debug("CMS Content:",a)})}]),firebaseCmsModule.service("firebaseCmsService",["firebaseCms","$q",function(a,b){function c(){var a=b.defer();return e(),d(g).then(function(b){f(),k.setContent(b.val()).then(function(){a.resolve(i)})})["catch"](function(b){f(),a.reject(b)}),a.promise}function d(a){var c=b.defer();return a.once("value",function(a){a.exists()?(k.setContent(a.val()),c.resolve(a)):c.reject("malformed data")},function(a){c.reject(a)}),c.promise}function e(){g||(g=new Firebase(a.firebaseUrl)),Firebase.goOnline()}function f(){j.autoDisconnect===!0&&(Firebase.goOffline(),g=null,Firebase.goOnline())}var g,h=b.defer(),i=h.promise,j={autoDisconnect:!0,bindContent:!1},k={init:function(){return c()},getContent:function(){return i},setContent:function(a){return h.resolve(a),i},autoDisconnect:function(a){j.autoDisconnect=a}};return k}]);